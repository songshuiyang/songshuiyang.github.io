<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>JVM内存溢出异常(一)OutOfMemoryError | 宋水阳个人博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#3F51B5"><meta name="keywords" content="java,jvm"><meta name="description" content="在Java虚拟机规范的描述中，除了程序计数器外，虚拟机内存的其他几个运行时区域都有可能发生OutOfMemoryError（OOM）异常的可能，下面将介绍这些运行时区域出现OOM的场景及解决方法  Java堆溢出 Java堆用于存储对象实例，只要不断的创建对象，并且保证GC Roots到对象之间有可达路径来避免垃圾回收机制清除这些对象，那么在对象数量到达最大堆的容量限制之后就会产生内存溢出异常"><meta name="keywords" content="java,jvm"><meta property="og:type" content="article"><meta property="og:title" content="JVM内存溢出异常(一)OutOfMemoryError"><meta property="og:url" content="http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/index.html"><meta property="og:site_name" content="宋水阳个人博客"><meta property="og:description" content="在Java虚拟机规范的描述中，除了程序计数器外，虚拟机内存的其他几个运行时区域都有可能发生OutOfMemoryError（OOM）异常的可能，下面将介绍这些运行时区域出现OOM的场景及解决方法  Java堆溢出 Java堆用于存储对象实例，只要不断的创建对象，并且保证GC Roots到对象之间有可达路径来避免垃圾回收机制清除这些对象，那么在对象数量到达最大堆的容量限制之后就会产生内存溢出异常"><meta property="og:locale" content="default"><meta property="og:image" content="http://www.songshuiyang.site/images/server/java/JVM/dump.jpg"><meta property="og:updated_time" content="2019-03-25T13:02:01.134Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="JVM内存溢出异常(一)OutOfMemoryError"><meta name="twitter:description" content="在Java虚拟机规范的描述中，除了程序计数器外，虚拟机内存的其他几个运行时区域都有可能发生OutOfMemoryError（OOM）异常的可能，下面将介绍这些运行时区域出现OOM的场景及解决方法  Java堆溢出 Java堆用于存储对象实例，只要不断的创建对象，并且保证GC Roots到对象之间有可达路径来避免垃圾回收机制清除这些对象，那么在对象数量到达最大堆的容量限制之后就会产生内存溢出异常"><meta name="twitter:image" content="http://www.songshuiyang.site/images/server/java/JVM/dump.jpg"><link rel="alternate" type="application/atom+xml" title="宋水阳个人博客" href="/atom.xml"><link rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="/css/style.css?v=1.7.2"><script>window.lazyScripts=[]</script></head><body><div id="loading" class="active"></div><aside id="menu"><div class="inner flex-row-vertical"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="icon icon-lg icon-close"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.jpg)"><div class="brand"> <a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/avatar.jpg"></a><hgroup class="introduce"><h5 class="nickname">songshuiyang</h5> <a href="mailto:songshuiyang@foxmail.com" title="songshuiyang@foxmail.com" class="mail">songshuiyang@foxmail.com</a></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon icon-lg icon-home"></i> 主页</a></li><li class="waves-block waves-effect"><a href="/archives"><i class="icon icon-lg icon-archives"></i> 归档</a></li><li class="waves-block waves-effect"><a href="/categories"><i class="icon icon-lg icon-th-list"></i> 分类</a></li><li class="waves-block waves-effect"><a href="/tags"><i class="icon icon-lg icon-tags"></i> 标签</a></li><li class="waves-block waves-effect"><a href="https://github.com/songshuiyang" target="_blank"><i class="icon icon-lg icon-github"></i> Github</a></li></ul></div></div></aside><main id="main"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?ac93934d9b847216e10a2f133187e535";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-navicon"></i></a><div class="flex-col header-title ellipsis">JVM内存溢出异常(一)OutOfMemoryError</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i></a> <input type="text" id="key" class="search-input" autocomplete="off" placeholder=""><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare"><i class="icon icon-lg icon-share-alt"></i></a></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">JVM内存溢出异常(一)OutOfMemoryError</h1><h5 class="subtitle"> <time datetime="2019-03-04T05:59:44.000Z" itemprop="datePublished" class="page-time">2019-03-04</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/服务器/">服务器</a></li></ul></h5></div></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap post-toc-shrink" id="post-toc"><h4>TOC</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Java堆溢出"><span class="post-toc-number">1.</span> <span class="post-toc-text">Java堆溢出</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#虚拟机栈和本地方法栈溢出"><span class="post-toc-number">2.</span> <span class="post-toc-text">虚拟机栈和本地方法栈溢出</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#方法区和运行时常量池溢出"><span class="post-toc-number">3.</span> <span class="post-toc-text">方法区和运行时常量池溢出</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#本机直接内存溢出"><span class="post-toc-number">4.</span> <span class="post-toc-text">本机直接内存溢出</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#内存溢出及内存泄漏"><span class="post-toc-number">5.</span> <span class="post-toc-text">内存溢出及内存泄漏</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1、内存溢出-out-of-memory"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">1、内存溢出 out of memory</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-1-方法区溢出-out-of-memory-PermGen-space"><span class="post-toc-number">5.1.1.</span> <span class="post-toc-text">1.1 方法区溢出 out of memory: PermGen space</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-2-本机直接内存溢出"><span class="post-toc-number">5.1.2.</span> <span class="post-toc-text">1.2 本机直接内存溢出</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2、内存泄露-memory-leak"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">2、内存泄露 memory leak</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3、引起内存溢出的原因"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">3、引起内存溢出的原因</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4、内存溢出的解决方案"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">4、内存溢出的解决方案</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其他"><span class="post-toc-number">6.</span> <span class="post-toc-text">其他</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考转载"><span class="post-toc-number">7.</span> <span class="post-toc-text">参考转载</span></a></li></ol></nav></aside><article id="post-backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">JVM内存溢出异常(一)OutOfMemoryError</h1><div class="post-meta"> <time class="post-time" title="2019-03-04 13:59:44" datetime="2019-03-04T05:59:44.000Z" itemprop="datePublished">2019-03-04</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/服务器/">服务器</a></li></ul><span id="busuanzi_container_site_pv"><i class="icon icon-eye icon-pr"></i> 本页总访问量<span id="busuanzi_value_page_pv"></span>次</span></div><div class="post-content" id="post-content" itemprop="postContent"><blockquote><p>在Java虚拟机规范的描述中，除了程序计数器外，虚拟机内存的其他几个运行时区域都有可能发生OutOfMemoryError（OOM）异常的可能，下面将介绍这些运行时区域出现OOM的场景及解决方法</p></blockquote><h2 id="Java堆溢出"><a href="#Java堆溢出" class="headerlink" title="Java堆溢出"></a>Java堆溢出</h2><ul><li><p>Java堆用于存储对象实例，只要不断的创建对象，并且保证GC Roots到对象之间有可达路径来避免垃圾回收机制清除这些对象，那么在对象数量到达最大堆的容量限制之后就会产生内存溢出异常</p></li><li><p>测试代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Java堆内存异常测试</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * VM参数：</span></span><br><span class="line"><span class="comment"> *      -Xms20M -Xmx20M -XX:+HeapDumpOnOutOfMemoryError</span></span><br><span class="line"><span class="comment"> * 堆的最小值-Xms参数与最大值-Xmx参数设置为一样即可避免堆自动扩展</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> songsy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/3/22 18:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Jvm4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Jvm4&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            list.add(<span class="keyword">new</span> Jvm4());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>输出结果</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">Dumping heap to java_pid17684.hprof ...</span><br><span class="line">Heap dump file created [29356301 bytes in 0.114 secs]</span><br><span class="line">Exception in thread "main" java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">	at java.util.Arrays.copyOf(Arrays.java:2245)</span><br><span class="line">	at java.util.Arrays.copyOf(Arrays.java:2219)</span><br><span class="line">	at java.util.ArrayList.grow(ArrayList.java:242)</span><br><span class="line">	at java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:216)</span><br><span class="line">	at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:208)</span><br><span class="line">	at java.util.ArrayList.add(ArrayList.java:440)</span><br><span class="line">	at com.songsy.Jvm4.main(Jvm4.java:24)</span><br></pre></td></tr></table></figure></li><li><p>我们可以在vm参数中配置<code>-XX:+HeapDumpOnOutOfMemoryError</code>参数，配置完成之后如果程序发生了<code>OutOfMemoryError</code>后会生成<code>堆转储快照</code>文件<code>java_pid17684.hprof</code></p></li><li><p>通过<code>JProfiler</code>打开此文件，发现都是<code>com.songsy.Jvm4.main</code>对象，原因是因为虚拟机限制了堆的最大空间(-Xmx20M)。当准备创建的对象需要的内存已经超过虚拟机堆所剩的空间。虚拟机会尝试通过<code>full GC</code>来回收内存，如果不行的话，就会抛出<code>OutOfMemoryError</code></p></li></ul><p><img src="/images/server/java/JVM/dump.jpg" alt=""></p><h2 id="虚拟机栈和本地方法栈溢出"><a href="#虚拟机栈和本地方法栈溢出" class="headerlink" title="虚拟机栈和本地方法栈溢出"></a>虚拟机栈和本地方法栈溢出</h2><ul><li>由于在HotSpot虚拟机中并不区分虚拟机栈和本地方法栈，因此，对于HotSpot来说，虽然-Xoss参数（设置本地方法栈大小）存在，但实际上是无效的，栈容量只由-Xss参数设定。</li><li>关于虚拟机栈和本地方法栈，在Java虚拟机规范中描述了两种异常：<ul><li>如果线程请求的栈深度大于虚拟机所允许的最大深度，将抛出<code>StackOverflowError</code>异常。</li><li>如果虚拟机在扩展栈时无法申请到足够的内存空间，则抛出<code>OutOfMemoryError</code>异常。</li></ul></li><li>这里把异常分成两种情况，看似更加严谨，但却存在着一些互相重叠的地方：当栈空间无法继续分配时，到底是内存太小，还是已使用的栈空间太大，其本质上只是对同一件事情的两种描述而已。</li><li><p>测试代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试 StackOverflowError异常</span></span><br><span class="line"><span class="comment"> * VM Args：-Xss128k</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> songsy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/3/22 16:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaVMStackSOF</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> stackLength = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stackLeak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stackLength++;</span><br><span class="line">        stackLeak();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        JavaVMStackSOF oom = <span class="keyword">new</span> JavaVMStackSOF();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            oom.stackLeak();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="comment">// 抛出StackOverflowError异常，异常出现时输出的堆栈深度相应缩小。</span></span><br><span class="line">            System.out.println(<span class="string">"stack length:"</span> + oom.stackLength);</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>输出结果</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stack length:<span class="number">11424</span></span><br><span class="line">Exception in thread <span class="string">"main"</span> java.lang.StackOverflowError</span><br><span class="line">	at com.songsy.JavaVMStackSOF.stackLeak(JavaVMStackSOF.java:<span class="number">13</span>)</span><br><span class="line">	at com.songsy.JavaVMStackSOF.stackLeak(JavaVMStackSOF.java:<span class="number">14</span>)</span><br><span class="line">	at com.songsy.JavaVMStackSOF.stackLeak(JavaVMStackSOF.java:<span class="number">14</span>)</span><br></pre></td></tr></table></figure><ul><li><p>测试代码2：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试 StackOverflowError异常</span></span><br><span class="line"><span class="comment"> * VM Args：-Xss128k</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> songsy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/3/22 17:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaVMStackSOF1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> stackLength = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stackLeak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stackLength++;</span><br><span class="line">        stackLeak();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JavaVMStackSOF1 oom = <span class="keyword">new</span> JavaVMStackSOF1();</span><br><span class="line">        <span class="keyword">long</span> e0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> e9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> q9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> r9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> t9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> y9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> u9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> i9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> o9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> p9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> a9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> s9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> d9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> f9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> g9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> h9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> j9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> k9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> l9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> z9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> c9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> v9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> b9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> n9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> m9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> qq9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww0 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww2 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww3 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww4 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww5 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww6 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww7 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww8 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> ww9 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            oom.stackLeak();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"stack length:"</span> + oom.stackLength);</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>实验结果表明：在单个线程下，无论是由于栈帧太大还是虚拟机栈容量太小，当内存无法分配的时候，虚拟机抛出的都是StackOverflowError异常。</p></li><li><p>如果测试时不限于单线程，通过不断地建立线程的方式倒是可以产生内存溢出异常，如代码清单2-5所示。但是这样产生的内存溢出异常与栈空间是否足够大并不存在任何联系，或者准确地说，在这种情况下，为每个线程的栈分配的内存越大，反而越容易产生内存溢出异常。</p></li><li><p>其实原因不难理解，操作系统分配给每个进程的内存是有限制的，譬如32位的Windows限制为2GB。虚拟机提供了参数来控制Java堆和方法区的这两部分内存的最大值。剩余的内存为2GB（操作系统限制）减去Xmx（最大堆容量），再减去MaxPermSize（最大方法区容量），程序计数器消耗内存很小，可以忽略掉。如果虚拟机进程本身耗费的内存不计算在内，剩下的内存就由虚拟机栈和本地方法栈“瓜分”了。每个线程分配到的栈容量越大，可以建立的线程数量自然就越少，建立线程时就越容易把剩下的内存耗尽。</p></li></ul><h2 id="方法区和运行时常量池溢出"><a href="#方法区和运行时常量池溢出" class="headerlink" title="方法区和运行时常量池溢出"></a>方法区和运行时常量池溢出</h2><ul><li><p>由于运行时常量池是方法区的一部分，因此这两个区域的溢出测试就放在一起进行。前面提到JDK 1.7开始逐步“去永久代”的事情，在此就以测试代码观察一下这件事对程序的实际影响。</p></li><li><p><code>String.intern()</code>是一个Native方法，它的作用是：如果字符串常量池中已经包含一个等于此<code>String</code>对象的字符串，则返回代表池中这个字符串的<code>String</code>对象；否则，将此<code>String</code>对象包含的字符串添加到常量池中，并且返回此<code>String</code>对象的引用。在<code>JDK 1.6</code>及之前的版本中，由于常量池分配在永久代内，我们可以通过<code>-XX:PermSize</code>和<code>-XX:MaxPermSize</code>限制方法区大小，从而间接限制其中常量池的容量，如代码清单2-6所示。</p></li><li><p>测试代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * VM Args：-XX:PermSize=10M -XX:MaxPermSize=10M</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> songsy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/3/22 17:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RuntimeConstantPoolOOM</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 使用List保持着常量池引用，避免Full GC回收常量池行为</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="comment">// 10MB的PermSize在integer范围内足够产生OOM了</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            list.add(String.valueOf(i++).intern());</span><br><span class="line">            System.out.println(String.valueOf(i++).intern());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>输出结果</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.OutOfMemoryError: PermGen space  </span><br><span class="line">at java.lang.String.intern(Native Method)  </span><br><span class="line">at org.fenixsoft.oom.RuntimeConstantPoolOOM.main(RuntimeConstantPoolOOM.java:<span class="number">18</span>)</span><br></pre></td></tr></table></figure></li><li><p>从运行结果中可以看到，运行时常量池溢出，在OutOfMemoryError后面跟随的提示信息是“PermGen space”，说明运行时常量池属于方法区（HotSpot虚拟机中的永久代）的一部分。</p></li><li><p>方法区用于存放Class的相关信息，如类名、访问修饰符、常量池、字段描述、方法描述等。对于这些区域的测试，基本的思路是运行时产生大量的类去填满方法区，直到溢出。虽然直接使用Java SE API也可以动态产生类（如反射时的GeneratedConstructorAccessor和动态代理等），但在本次实验中操作起来比较麻烦。在代码清单2-8中，笔者借助CGLib直接操作字节码运行时生成了大量的动态类。</p></li><li><p>值得特别注意的是，我们在这个例子中模拟的场景并非纯粹是一个实验，这样的应用经常会出现在实际应用中：当前的很多主流框架，如Spring、Hibernate，在对类进行增强时，都会使用到CGLib这类字节码技术，增强的类越多，就需要越大的方法区来保证动态生成的Class可以加载入内存。另外，JVM上的动态语言（例如Groovy等）通常都会持续创建类来实现语言的动态性，随着这类语言的流行，也越来越容易遇到与代码清单2-8相似的溢出场景。</p></li><li><p>代码清单2-8　借助CGLib使方法区出现内存溢出异常</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * VM Args： -XX:PermSize=10M -XX:MaxPermSize=10M</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> songsy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/3/22 17:45</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaMethodAreaOOM</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line">            enhancer.setSuperclass(OOMObject.class);</span><br><span class="line">            enhancer.setUseCache(<span class="keyword">false</span>);</span><br><span class="line">            enhancer.setCallback(<span class="keyword">new</span> MethodInterceptor() &#123;</span><br><span class="line">                <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object obj, Method method, Object[] args, MethodProxy proxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> proxy.invokeSuper(obj, args);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            enhancer.create();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">OOMObject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>输出结果</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.lang.OutOfMemoryError: PermGen space  </span><br><span class="line">at java.lang.ClassLoader.defineClass1(Native Method)  </span><br><span class="line">at java.lang.ClassLoader.defineClassCond(ClassLoader.java:<span class="number">632</span>)  </span><br><span class="line">at java.lang.ClassLoader.defineClass(ClassLoader.java:<span class="number">616</span>)  </span><br><span class="line">... <span class="number">8</span> more</span><br></pre></td></tr></table></figure></li><li><p>方法区溢出也是一种常见的内存溢出异常，一个类要被垃圾收集器回收掉，判定条件是比较苛刻的。在经常动态生成大量Class的应用中，需要特别注意类的回收状况。这类场景除了上面提到的程序使用了CGLib字节码增强和动态语言之外，常见的还有：大量JSP或动态产生JSP文件的应用（JSP第一次运行时需要编译为Java类）、基于OSGi的应用（即使是同一个类文件，被不同的加载器加载也会视为不同的类）等。</p></li></ul><h2 id="本机直接内存溢出"><a href="#本机直接内存溢出" class="headerlink" title="本机直接内存溢出"></a>本机直接内存溢出</h2><ul><li><p>直接内存并不是虚拟机运行时数据区的一部分，也不是Java 虚拟机规范中定义的内存区域。在JDK1.4 中新加入了NIO(New Input/Output)类，引入了一种基于通道（Channel）与缓冲区（Buffer）的 I/O 方式，它可以使用 native 函数库直接分配堆外内存，然后通过一个存储在Java堆中的 DirectByteBuffer 对象作为这块内存的引用进行操作。这样能在一些场景中显著提高性能，因为避免了在 Java 堆和 Native 堆中来回复制数据。</p></li><li><p>特点</p><ul><li>本机直接内存的分配不会受到Java 堆大小的限制，受到本机总内存大小限制</li><li>直接内存也可以由 -XX:MaxDirectMemorySize 指定</li><li>直接内存申请空间耗费更高的性能</li><li>直接内存IO读写的性能要优于普通的堆内存</li></ul></li><li><p>当我们的需要频繁访问大的内存而不是申请和释放空间时，通过使用直接内存可以提高性能。</p></li><li><p>直接内存溢出测试，测试代码如下，运行时添加参数<code>-Xmx20M -XX:MaxDirectMemorySize=10M</code> 设置降低直接内存的空间来加快异常的抛出</p></li><li><p>测试代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 本机直接内存溢出</span></span><br><span class="line"><span class="comment"> * VM args:-Xmx20M -XX:MaxDirectMemorySize=10M</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> songsy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/3/22 18:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DirectMemoryOOM</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> _1MB = <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Field unsafeField = Unsafe.class.getDeclaredFields()[<span class="number">0</span>];</span><br><span class="line">        unsafeField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        Unsafe unsafe = (Unsafe) unsafeField.get(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            unsafe.allocateMemory(_1MB);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>输出结果</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.OutOfMemoryError</span><br><span class="line">	at sun.misc.Unsafe.allocateMemory(Native Method)</span><br><span class="line">	at com.songsy.DirectMemoryOOM.main(DirectMemoryOOM.java:<span class="number">22</span>)</span><br></pre></td></tr></table></figure></li><li><p>由DirectMemory导致的内存溢出，一个明显的特征就是再Heap Dump文件中不会看见明显的异常，如果读者发现OOM之后Dump文件很小，而程序中又直接或间接的使用了NIO，那就可以考虑检查一下是不是这方面的原因。</p></li></ul><h2 id="内存溢出及内存泄漏"><a href="#内存溢出及内存泄漏" class="headerlink" title="内存溢出及内存泄漏"></a>内存溢出及内存泄漏</h2><h3 id="1、内存溢出-out-of-memory"><a href="#1、内存溢出-out-of-memory" class="headerlink" title="1、内存溢出 out of memory"></a>1、内存溢出 out of memory</h3><ul><li>是指程序在申请内存时，没有足够的内存空间供其使用，出现out of memory；比如申请了一个integer,但给它存了long才能存下的数，那就是内存溢出</li></ul><h4 id="1-1-方法区溢出-out-of-memory-PermGen-space"><a href="#1-1-方法区溢出-out-of-memory-PermGen-space" class="headerlink" title="1.1 方法区溢出 out of memory: PermGen space"></a>1.1 方法区溢出 out of memory: PermGen space</h4><h4 id="1-2-本机直接内存溢出"><a href="#1-2-本机直接内存溢出" class="headerlink" title="1.2 本机直接内存溢出"></a>1.2 本机直接内存溢出</h4><h3 id="2、内存泄露-memory-leak"><a href="#2、内存泄露-memory-leak" class="headerlink" title="2、内存泄露 memory leak"></a>2、内存泄露 memory leak</h3><ul><li><p>是指程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露堆积后果很严重，无论多少内存,迟早会被占光</p></li><li><p>memory leak会最终会导致out of memory！</p></li><li><p>内存溢出就是你要求分配的内存超出了系统能给你的，系统不能满足需求，于是产生溢出。</p></li><li><p>内存泄漏是指你向系统申请分配内存进行使用(new)，可是使用完了以后却不归还(delete)，结果你申请到的那块内存你自己也不能再访问（也许你把它的地址给弄丢了），而系统也不能再次将它分配给需要的程序。一个盘子用尽各种方法只能装4个果子，你装了5个，结果掉倒地上不能吃了。这就是溢出！比方说栈，栈满时再做进栈必定产生空间溢出，叫上溢，栈空时再做退栈也产生空间溢出，称为下溢。就是分配的内存不足以放下数据项序列,称为内存溢出.</p></li><li><p>从用户使用程序的角度来看，内存泄漏本身不会产生什么危害，作为一般的用户，根本感觉不到内存泄漏的存在。真正有危害的是内存泄漏的堆积，这会最终消耗尽系统所有的内存。从这个角度来说，一次性内存泄漏并没有什么危害，因为它不会堆积，而隐式内存泄漏危害性则非常大，因为较之于常发性和偶发性内存泄漏它更难被检测到</p></li></ul><h3 id="3、引起内存溢出的原因"><a href="#3、引起内存溢出的原因" class="headerlink" title="3、引起内存溢出的原因"></a>3、引起内存溢出的原因</h3><ul><li>内存中加载的数据量过于庞大，如一次从数据库取出过多数据；</li><li>集合类中有对对象的引用，使用完后未清空，使得JVM不能回收；</li><li>代码中存在死循环或循环产生过多重复的对象实体；</li><li>使用的第三方软件中的BUG；</li><li>启动参数内存值设定的过小；</li></ul><h3 id="4、内存溢出的解决方案"><a href="#4、内存溢出的解决方案" class="headerlink" title="4、内存溢出的解决方案"></a>4、内存溢出的解决方案</h3><ul><li>修改JVM启动参数，直接增加内存。(-Xms，-Xmx参数一定不要忘记加。)</li><li>检查错误日志，查看“OutOfMemory”错误前是否有其它异常或错误。</li><li>对代码进行走查和分析，找出可能发生内存溢出的位置。</li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><blockquote><p>java -Xmx3550m -Xms3550m -Xmn2g -Xss128k</p><ul><li>-Xmx3550m：设置JVM最大可用内存为3550M。</li><li>-Xms3550m：设置JVM促使内存为3550m。此值可以设置与-Xmx相同，以避免每次垃圾回收完成后JVM重新分配内存。</li><li>-Xmn2g：设置年轻代大小为2G。整个JVM内存大小=年轻代大小 + 年老代大小 + 持久代大小。持久代一般固定大小为64m，所以增大年轻代后，将会减小年老代大小。此值对系统性能影响较大，Sun官方推荐配置为整个堆的3/8。</li><li>-Xss128k： 设置每个线程的堆栈大小。JDK5.0以后每个线程堆栈大小为1M，以前每个线程堆栈大小为256K。更具应用的线程所需内存大小进行调整。在相同物理内 存下，减小这个值能生成更多的线程。但是操作系统对一个进程内的线程数还是有限制的，不能无限生成，经验值在3000~5000左右。</li></ul></blockquote><h2 id="参考转载"><a href="#参考转载" class="headerlink" title="参考转载"></a>参考转载</h2><ul><li>周志明版 《深入理解Java虚拟机》</li><li><a href="https://www.cnblogs.com/Sharley/p/5285045.html" target="_blank" rel="noopener">https://www.cnblogs.com/Sharley/p/5285045.html</a></li><li><a href="https://blog.csdn.net/u012552052/article/details/44204735" target="_blank" rel="noopener">https://blog.csdn.net/u012552052/article/details/44204735</a></li><li><a href="https://blog.csdn.net/sells2012/article/details/18656263" target="_blank" rel="noopener">https://blog.csdn.net/sells2012/article/details/18656263</a></li></ul></div><blockquote class="post-copyright"><footer> <a href="http://www.songshuiyang.site"><img src="/img/avatar.jpg" alt="songshuiyang"> songshuiyang</a></footer></blockquote><div class="post-footer"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jvm/">jvm</a></li></ul><div class="page-share-wrap"><div class="page-share" id="pageShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/&title=《JVM内存溢出异常(一)OutOfMemoryError》 — 宋水阳个人博客&pic=http://www.songshuiyang.site/img/avatar.jpg" data-title="微博"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/&title=《JVM内存溢出异常(一)OutOfMemoryError》 — 宋水阳个人博客&source=" data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JVM内存溢出异常(一)OutOfMemoryError》 — 宋水阳个人博客&url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/&via=http://www.songshuiyang.site" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle"><i class="icon icon-share-alt icon-lg"></i></a></div></div></div><nav class="post-nav flex-row flex-justify-between"><div class="waves-block waves-effect prev"><a href="/2019/03/10/backend/Java/JVM/JVM垃圾回收(一)垃圾回收算法/" id="post-prev" class="post-nav-link"><div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div><h4 class="title">JVM垃圾回收(一)垃圾回收算法</h4></a></div><div class="waves-block waves-effect next"><a href="/2019/03/04/backend/Java/JVM/JVM运行时数据区域(六)方法区/" id="post-next" class="post-nav-link"><div class="tips">Next<i class="icon icon-angle-right icon-lg icon-pl"></i></div><h4 class="title">JVM运行时数据区域(六)方法区</h4></a></div></nav><div class="comments vcomment" id="comments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(e){return-1<GUEST_INFO.indexOf(e)});new Valine({el:"#comments",notify:!1,verify:!1,appId:"tFSCtBMsjdDCJmCEKGvMlHLh-gzGzoHsz",appKey:"wDUxU3I7OcPPuDDwMSe5Ochu",avatar:"robohash",placeholder:"少侠不吐槽吐槽?",guest_info:0==guest_info.length?GUEST_INFO:guest_info,pageSize:"10"})</script></article></div><footer class="footer"><div class="bottom"><p><span>songshuiyang &copy; 2017 - 2019</span> <span><a href="http://www.miitbeian.gov.cn/" target="_blank">赣ICP备18001541号</a><br></span> <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span> <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人次</span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a><div class="global-share" id="globalShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/&title=《JVM内存溢出异常(一)OutOfMemoryError》 — 宋水阳个人博客&pic=http://www.songshuiyang.site/img/avatar.jpg" data-title="微博"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/&title=《JVM内存溢出异常(一)OutOfMemoryError》 — 宋水阳个人博客&source=" data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《JVM内存溢出异常(一)OutOfMemoryError》 — 宋水阳个人博客&url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/&via=http://www.songshuiyang.site" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://www.songshuiyang.site/2019/03/04/backend/Java/JVM/JVM内存溢出异常(一)OutOfMemoryError/" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><div class="page-modal wx-share" id="wxShare"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><p>扫一扫，分享到微信</p> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADLUlEQVR42u3aQY7iQAwFUO5/aWYzO7rT33YhEfOyQgOk6hVS/7GdxyO+ni/X67uvn7z+l+vXv3032c+xCxsbG/sm7Ofldb3MM76qh1jdVW7BxsbG3sr+7S/89Wd6yyehlURjvk9sbGxs7ElpcX3/a8ZkdWxsbGzsPGZyZBJ7ybv5Z7CxsbG/h50XDKeCp9forza/DvTSsLGxsT+enU9FP//1W+bb2NjY2B/Mfhav6qFMYmwyVP7jbtjY2NiL2HkA9Ea21RKiOkLu7R8bGxt7H/u6uZM35ZOw6cVY/q28yYWNjY29j11t1kza+r2xblLeNAcD2NjY2DdnJxuaNOh7JcrZ2PthJ9jY2Ngr2NUF8gLgbJlxqkUVVV3Y2NjYt2Xno9kcloRZrzjJo/SP+TY2Njb2zdmTv+fVpxwTfHIE14eLjY2N/W3s61tXB8CFB2XiMDs1Nnj0lsHGxsb+eHZeSOTRMom3/HV1bIyNjY29lT0JjOp4oBpsPVg0YMDGxsZexD61rbws6bWW8sHDKMmxsbGxb8uuPv5SjbQ8TuaP++RFFDY2NvY+9qnXk03nsVQdLfwaYNjY2NiL2L3bVe9QJSV3bgYqNjY29gr2Ox7QmbeNqg/i5K2o/5/BxsbGXsROAM2WTdy4zxtP1VFE+cfDxsbGviH77H/93/HATXWoEK2IjY2NvYidRNEkzKqj314JNIo9bGxs7BXsvJVTHaz2oms++o0OHRsbG3sFu1paVCMnb/3nd6j+SFFTCRsbG/u27FOj07w91Gv3z6cfP6yFjY2NvZSdxEmvXMnXSt7tHSI2Njb2bnbefD817k0O6OwIGRsbG3s3uzckKDRxWk2i/DjKLS1sbGzsdewkzKqN+2QT+aFPLmxsbOyt7GfxqhYneUTlw+PJOBkbGxt7H7s3Up1/q3eU+beSw8XGxsbexE5CqzqOzSOqGpnVsQE2Njb297B7Tf/qgzJ50z8fABf6Z9UlsbGxsZeyew/QnC0/5j8GNjY29jezq638SSFRHUXnQwhsbGzsfeykVZSUHAmjWkJUDzeKYWxsbOxF7OpWJodSZeSHm0QjNjY29jr2P6v4Al0ulemDAAAAAElFTkSuQmCC" alt="微信分享二维码"></div><script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script><script>var BLOG={ROOT:"/",SHARE:!0,REWARD:!1};lazyScripts.push("//s95.cnzz.com/z_stat.php?id=1275444015&web_id=1275444015")</script><script src="/js/main.min.js?v=1.7.2"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis"> {tags}</div> <time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=1.7.2" async></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>!function(){var t,e=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="老铁为何离开了",clearTimeout(t)):(document.title="欢迎回来",t=setTimeout(function(){document.title=e},2e3))})}()</script></body></html><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?ac93934d9b847216e10a2f133187e535";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>